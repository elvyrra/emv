/**
 * emv.js 3.2.0
 *
 * @author Elvyrra S.A.S
 * @license http://rem.mit-license.org/ MIT
 */
"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.EMV=t()}(this,function(){function e(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function t(){}function r(e){var t=["string","number","boolean","undefined","symbol"];return t.indexOf("undefined"==typeof e?"undefined":_typeof(e))!==-1||null===e||e instanceof Date}function n(e){return e.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")}function i(t,r){t.$before=[],t.previousElementSibling&&(t.$before=[t.previousElementSibling],t.previousElementSibling.$before&&(t.$before=t.$before.concat(t.previousElementSibling.$before))),t.$parent=t.parentNode;var n=t.innerHTML,i=e();t.$templateName=i,r.$registerTemplate(i,n)}var o=function(e){function t(e){_classCallCheck(this,t);var r="EMV Error : "+e;return _possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r))}return _inherits(t,e),t}(Error),a=function(){function n(e,t,r,i){var o=this;_classCallCheck(this,n),Object.defineProperties(this,{$computed:{value:{}},$observed:{value:new Set([])},$callers:{value:{}},$watchers:{value:{}},$root:{value:t||this,writable:!0},$parent:{value:r,writable:!0},$this:{value:this,writable:!0},$directives:{value:{}},$object:{value:e,writable:!0},$additionalProperties:{value:new Set([]),writable:!0}}),Object.keys(e).forEach(function(t){o.$observe(t,e[t],i)}),"Object"!==e.constructor.name&&Object.getOwnPropertyNames(e.constructor.prototype).forEach(function(t){o.constructor.prototype[t]||(o.constructor.prototype[t]=e.constructor.prototype[t])})}return _createClass(n,[{key:"$observe",value:function(e,i,o){var a=this;if(!this.$observed.has(e)){var s={get:function(){var t=a.$object[e];if(a.$root&&"function"!=typeof t){if(a.$root.$executingComputed&&(a.$callers[e]||(a.$callers[e]={}),!a.$callers[e][a.$root.$executingComputed.uid])){var r=a.$root.$executingComputed,n=r.object;Object.keys(n.$computed).every(function(t){return n.$computed[t]!==r||(a.$callers[e][r.uid]={property:t,reader:r.reader,writer:r.writer,object:r.object},!1)})}a.$root.$executingDirective&&(a.$directives[e]||(a.$directives[e]=new Set([])),a.$directives[e].add(a.$root.$executingDirective.uid))}return t},set:function(i){var s=!1;if(e in a.$object||a.$root.$creatingContext||(s=!0),"function"==typeof i||i instanceof HTMLElement)return a.$object[e]=i,!0;var u=a.$object[e];if(r(i)||i instanceof n?(a.$object[e]=i,i instanceof l&&(i.$setRoot(a.$root||a),i.$parent=a)):Array.isArray(i)?a.$object[e]=new c(i,a.$root||a,a,e):a.$object[e]=new n(i,a.$root||a,a,e),a.$computed[e]&&a.$computed[e].writer)try{a.$computed[e].writer(a,i,u)}catch(e){t()}return u!==i&&(a.$notifySubscribers(e,i,u),s&&a.$parent&&a.$parent.$notifySubscribers(o,a.$parent)),!0},enumerable:!0,configurable:!0};Object.defineProperty(this,e,s),this.$observed.add(e),this[e]=i}}},{key:"$setRoot",value:function(e){var t=this;this.$root=e,Object.keys(this.$object).forEach(function(r){t.$object[r]instanceof n&&t.$object[r].$setRoot(e)})}},{key:"$notifySubscribers",value:function(e,t,r){var n=this;if(e){var i=void 0===t?this[e]:t;this.$callers[e]&&Object.keys(this.$callers[e]).forEach(function(t){var r=n.$callers[e][t];r.object[r.property]=r.reader(r.object)}),this.$watchers[e]&&Object.keys(this.$watchers[e]).forEach(function(t){n.$watchers[e][t].call(n,i,r)}),this.$directives[e]&&this.$directives[e].forEach(function(t){var r=n.$root.$directives[t];return r?void(r&&r.handler.update&&r.handler.update(r.element,r.parameters,r.model)):void n.$directives[e].delete(t)})}}},{key:"valueOf",value:function(){var e=this,t={};return Object.keys(this).forEach(function(r){t[r]=e[r]?e[r].valueOf():e[r]}),t}},{key:"toString",value:function(){return JSON.stringify(this.valueOf())}},{key:"$watch",value:function(t,r){var n=this;if(Array.isArray(t))return void t.forEach(function(e){n.$watch(e,r)});var i=t.split("."),o=void 0,a=i.pop();o=this.$this,i.forEach(function(e){o=o[e]}),o&&(o.$watchers[a]||(o.$watchers[a]={}),r.uid=e(),o.$watchers[a][r.uid]=r)}},{key:"$unwatch",value:function(e,t){var r=e.split("."),n=void 0,i=r.pop();n=this.$this,r.forEach(function(e){n=n[e]}),n.$watchers[i]&&(t?delete n.$watchers[i][t.uid]:n.$watchers[i]={})}}]),n}(),c=function(e){function t(e,r,n,i){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,i));return o.$observe("length",e.length,i),o.$watch("length",function(){o.forEach(function(e,t){o.$observe(t,e,i)})}),o}return _inherits(t,e),_createClass(t,[{key:"valueOf",value:function(){return Array.from(this).map(function(e){return e?e.valueOf():e})}}]),t}(a);Object.getOwnPropertyNames(Array.prototype).forEach(function(e){c.prototype[e]||(c.prototype[e]=Array.prototype[e])});var s=function t(r,n){_classCallCheck(this,t);var i=this;this.uid=e(),this.object=n;var o="function"==typeof r?{read:r}:r;o.write&&(this.writer=function(e,t,r){o.write.call(e,t,r)}),o.read&&(this.reader=function(e){var t=n.$root.$executingComputed;n.$root.$executingComputed=i;var r=void 0;try{r=o.read.call(e)}catch(e){r=void 0}return n.$root.$executingComputed=t,r})},u=function(){function t(e,r){var n=this;_classCallCheck(this,t),this.name=e;var i=this,o=function(t){r[t]&&(n[t]=function(o,a,c){var s=c.$root.$executingDirective;c.$root.$executingDirective={element:o,parameters:a,model:c,handler:i,uid:n.getUid(o),name:e};var u=r[t](o,a,c);return c.$executingDirective=s,u})};o("init"),o("bind"),o("update")}return _createClass(t,[{key:"getUid",value:function(t){return t.$uid||(t.$uid=e()),t.$uid+"-"+this.name}}]),t}(),l=function(t){function r(e,t){_classCallCheck(this,r);var n=e||{},i=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n.data||n,t));return Object.defineProperties(i,{$templates:{value:{}},$executingComputed:{writable:!0,value:null},$executingDirective:{writable:!0,value:null},$creatingContext:{writable:!0,value:!1}}),n.computed&&Object.keys(n.computed).forEach(function(e){i.$computed[e]=new s(n.computed[e],i),i.$observe(e)}),Object.keys(i.$computed).forEach(function(e){i.$computed[e].reader?i[e]=i.$computed[e].reader(i):i[e]=void 0}),i}return _inherits(r,t),_createClass(r,[{key:"$apply",value:function(e){if(this.$rootElement)throw new o("an emv instance cannot be instanciated on multiple DOM elements.");this.$rootElement=e||document.body,this.$createContext(this.$rootElement,this),this.$parse(this.$rootElement),this.$render(this.$rootElement)}},{key:"$clean",value:function(e,t){var r=this,n=e||this.$rootElement;n&&(n.$directives&&Object.keys(n.$directives).forEach(function(e){if(!t||t.indexOf(e)===-1){var i=n.$directives[e];delete r.$directives[i],delete n.$directives[e]}}),n.children&&Array.from(n.children).forEach(function(e){r.$clean(e)}),n===this.$rootElement&&delete this.$rootElement)}},{key:"$registerTemplate",value:function(e,t){var r=t.replace(/<!--(.*?)-->/g,"");this.$templates[e]=r}},{key:"$parseDirectiveTransformation",value:function(e){var t=/^(\w+)(\((.+)\))?$/.exec(e);if(t){var r=t[1],n="{"+(t[3]||"")+"}";return{name:r,parameters:n}}throw new Error}},{key:"$parseHandlebardDirective",value:function(e,t){var i=this,a=new RegExp(n(r.config.delimiters[0])+"(.+?)"+n(r.config.delimiters[1]),"g"),c=t.match(a);if(c){this.$getContext(e.parentNode);var s=t.replace(a,function(e,r){var n=r.split("::").map(function(e){return e.trim()}),a=n[0];return n.length>1&&n.slice(1).forEach(function(e){try{var r=i.$parseDirectiveTransformation(e);a="$root.constructor.transformations."+r.name+"("+a+", "+r.parameters+")"}catch(e){throw new o("Error while parsing directive transformation : "+t)}}),"' + "+a+" + '"});return s}return null}},{key:"$parse",value:function(e,t){var n=this;if(!e.$directives){if("template"===e.nodeName.toLowerCase())this.$registerTemplate(e.id,e.innerHTML),e.parentNode.removeChild(e);else if("#text"===e.nodeName.toLowerCase()){var i=this.$parseHandlebardDirective(e,e.textContent);null!==i&&this.$setElementDirective(e,"text","'"+i+"'")}else e.attributes&&(Object.keys(r.directives).forEach(function(i){if((!t||t.indexOf(i)===-1)&&e.getAttribute){var o=r.config.attributePrefix+"-"+i;if(e.hasAttribute(o)){var a=e.getAttribute(o),c=r.directives[i];n.$getContext(e),n.$setElementDirective(e,i,a),c.init&&c.init.call(n,e,a,n)}}}),Array.from(e.attributes).forEach(function(t){var r=t.name,i=t.textContent,o=n.$parseHandlebardDirective(e,i);if(null!==o){var a=n.$directives[e.$directives&&e.$directives.attr],c=a&&a.parameters||"";c&&(c=c.substring(1,c.length-1)+","),c+="'"+r+"' : '"+o+"'",c="{"+c+"}",n.$setElementDirective(e,"attr",c)}}));e.childNodes&&Array.from(e.childNodes).forEach(function(e){n.$parse(e)})}}},{key:"$setElementDirective",value:function(t,n,i){t.$directives||(t.$directives={}),t.$uid||(t.$uid=e());var o=r.directives[n],a=o.getUid(t);this.$directives[a]={name:n,handler:o,parameters:i,model:this,element:t},t.$directives[n]=a}},{key:"$render",value:function(e,t){var r=this;e.$stopRenderingPropagation=!1,e.$directives&&Object.keys(e.$directives).forEach(function(r){if(!(t&&t.indexOf(r)!==-1||e.$stopRenderingPropagation)){var n=e.$directives[r],i=this.$directives[n];if(!i)return;var o=i.handler,a=i.parameters;o.bind&&o.bind.call(this,e,a,this),o.update&&o.update.call(this,e,a,this)}}.bind(this)),document.documentElement.contains(e)&&!e.$stopRenderingPropagation&&e.childNodes&&Array.from(e.childNodes).forEach(function(e){r.$render(e)})}},{key:"$stopRenderingPropagation",value:function(e){e.$stopRenderingPropagation=!0}},{key:"$createContext",value:function(e,t,r){this.$creatingContext=!0;var n=t;t instanceof a?(n.$this=t,n.$parent=t.$parent,n.$root=this):n={$this:t,$parent:t.$parent,$root:this,$additionalProperties:new Set([])};var i=this.$getAdditionalContextProperties(e);i.forEach(function(t){if(["$this","$parent","$root"].indexOf(t)!==-1)throw new o("You cannot apply the key '"+t+"' as additionnal context property");n.$additionalProperties.add(t),Object.defineProperty(n,t,{value:(e.parentNode||e.$parent).$context[t],writable:!0})}),e.$additionalContextProperties=new Set(i),r&&Object.keys(r).forEach(function(t){n.$additionalProperties.add(t),Object.defineProperty(n,t,{value:r[t],writable:!0}),e.$additionalContextProperties.add(t)}),e.$context=n,this.$creatingContext=!1}},{key:"$removeContext",value:function(e){var t=this;delete e.$context,e.children&&Array.from(e.children).forEach(function(e){t.$removeContext(e)})}},{key:"$getContext",value:function(e){if(!e)return{};if(e.$context)return e.$context;var t=this.$getContext(e.parentNode);return e.$context=t,t}},{key:"$getAdditionalContextProperties",value:function(e){if(e.$additionalContextProperties)return e.$additionalContextProperties;if(e===this.$rootElement)return new Set([]);var t=e.parentNode||e.$parent;if(t){var r=this.$getAdditionalContextProperties(t);return e.$additionalContextProperties=r,r}return new Set([])}},{key:"$parseDirectiveGetterParameters",value:function(e){return new Function("$context","var $$result;with($context) {$$result=("+e+");};return $$result;")}},{key:"$getDirectiveValue",value:function(e,t,n){var i=this,o=e.replace(/\n\s*/g,""),a=this.$parseDirectiveGetterParameters(o),c=n||this.$getContext(t);try{var s=a(c);if("object"===("undefined"==typeof s?"undefined":_typeof(s))&&s.$transform&&"$data"in s){Array.isArray(s.$transform)||(s.$transform=[s.$transform]);var u=s.$data;return s.$transform.forEach(function(e){var t=i.$parseDirectiveTransformation(e),n=new Function("","return "+t.parameters+";");u=r.transformations[t.name](u,n())}),u}return s}catch(e){return}}},{key:"$parseDirectiveSetterParameters",value:function(e){var t=e,r=e.match(/\$(?:data|set)\s*:\s*(.+?)\s*[,}]/);return r&&(t=r[1]),new Function("$context","$value","\n                with($context) {\n                    "+t+" = $value;\n                }\n            ")}},{key:"$setDirectiveValue",value:function(e,t,r){var n=this.$parseDirectiveSetterParameters(e);try{n(this.$getContext(t),r)}catch(e){throw new o(e.message)}}},{key:"$insertRemoveElement",value:function(e,t,r,n){var i=r||e;if(t){var o=!i.$parent.contains(e)||n;if(o){var a=null;e.$before&&e.$before.every(function(e){return!i.$parent.contains(e)||(a=e,!1)}),a?a.nextElementSibling?i.$parent.insertBefore(e,a.nextElementSibling):i.$parent.appendChild(e):i.$parent.insertBefore(e,i.$parent.firstChild)}}else this.$stopRenderingPropagation(e),i.$parent.contains(e)&&i.$parent.removeChild(e)}}],[{key:"directive",value:function(e,t){this.directives[e]=new u(e,t)}},{key:"transform",value:function(e,t){this.transformations[e]=t}}]),r}(a);l.directives={},l.directive("show",{update:function(e,t,r){var n=r.$getDirectiveValue(t,e);n?e.style.display="":e.style.display="none"}}),l.directive("class",{update:function(e,t,r){var n=r.$getDirectiveValue(t,e);e.originalClassList||(e.originalClassList=[],Array.from(e.classList).forEach(function(t){e.originalClassList.push(t)})),Array.from(e.classList).forEach(function(t){e.originalClassList.indexOf(t)===-1&&e.classList.remove(t)}),n&&("string"==typeof n&&(n=_defineProperty({},n,!0)),"object"===("undefined"==typeof n?"undefined":_typeof(n))&&Object.keys(n).forEach(function(t){var r=t.split(" "),i=e.classList;r.forEach(function(e){n[t]?i.add(e):i.remove(e)})}))}}),l.directive("style",{update:function(e,t,r){var n=r.$getDirectiveValue(t,e);n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&Object.keys(n).forEach(function(t){var r=n[t];r?e.style[t]=r:e.style[t]=""})}}),l.directive("attr",{update:function(e,t,r){var n=r.$getDirectiveValue(t,e);n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&Object.keys(n).forEach(function(t){var r=n[t];r?e.setAttribute(t,r):e.removeAttribute(t)})}}),l.directive("disabled",{update:function(e,t,r){var n=r.$getDirectiveValue(t,e);n?e.setAttribute("disabled",!0):e.removeAttribute("disabled")}}),l.directive("value",{bind:function(e,t,r){e["true"===e.contentEditable?"onblur":"onchange"]=function(){var n=void 0,i=e.nodeName.toLowerCase(),o=e.type;switch(i){case"input":case"select":switch(o){case"checkbox":n=Boolean(e.checked);break;case"radio":n=document.querySelector('input[name="'+e.name+'"]:checked').value;break;case"number":n=parseFloat(e.value);break;case"date":n=e.value?new Date(e.value):null;break;default:n=e.value}break;case"textarea":n=e.value;break;default:if(e.contentEditable){n=e.innerHTML;break}return}r.$setDirectiveValue(t,e,n)}},update:function(e,t,r){var n=r.$getDirectiveValue(t,e);void 0===n&&(n="");var i=e.nodeName.toLowerCase(),o=e.type;switch(i){case"input":case"select":switch(o){case"checkbox":e.checked=Boolean(n);break;case"radio":var a=document.querySelector('input[name="'+e.name+'"][value="'+n+'"]');a&&(a.checked=!0);break;case"date":n instanceof Date||(n=new Date(n));var c=n.getFullYear(),s=(n.getMonth()+1).toString().padStart(2,"0"),u=n.getDate().toString().padStart(2,"0");e.value=c+"-"+s+"-"+u;break;case"file":return;default:e.value=n}break;case"textarea":e.value=n;break;default:e.contentEditable?e.innerHTML=n:e.value=n}}}),l.directive("input",{bind:function(e,t,r){e.addEventListener("input",function(){r.$setDirectiveValue(t,e,e.value)})},update:function(e,t,r){var n=r.$getDirectiveValue(t,e),i=e.selectionStart,o=e.selectionEnd;e.value=n||"",e.setSelectionRange(i,o)}}),l.directive("focus",{bind:function(e,r,n){e.addEventListener("focus",function(){try{n.$setDirectiveValue(r,e,!0)}catch(e){t()}}),e.addEventListener("blur",function(){try{n.$setDirectiveValue(r,e,!1)}catch(e){t()}})},update:function(e,t,r){var n=r.$getDirectiveValue(t,e);"object"===("undefined"==typeof n?"undefined":_typeof(n))&&"$get"in n&&(n=n.$get),n&&e!==document.activeElement?e.focus():n||e!==document.activeElement||e.blur()}}),l.directive("options",{update:function(e,t,r){function n(t,r){var n=document.createElement("option");n.value=t,n.innerText=r,t.toString()===s&&(n.selected=!0),e.appendChild(n)}if("select"!==e.nodeName.toLowerCase())throw new o("options directive can be applied only on select tags");var i=r.$getDirectiveValue(t,e),a=i.valueOf();if(i&&(!("$data"in i)||i.$data)){if(i.$data){a={};var c=i.$data.valueOf();Object.keys(c).forEach(function(e){var t=i.$data[e],r=i.$value?t[i.$value]:e,n=i.$label?t[i.$label]:t;a[r]=n})}var s=e.value||i.$selected;e.innerHTML="",Object.keys(a).forEach(function(e){var t=a[e];n(e,t)})}}}),l.directive("text",{update:function(e,t,r){var n=r.$getDirectiveValue(t,e);"#text"===e.nodeName?e.nodeValue=n:e.innerText=n}}),l.directive("html",{update:function(e,t,r){var n=r.$getDirectiveValue(t,e);e.innerHTML=n;var i=e.querySelectorAll("script");Array.from(i).forEach(function(e){if(e.innerText){var t=new Function(e.innerText);t()}else{var r=document.createElement("script");r.src=e.src,e.parentNode.replaceChild(r,e)}})}}),l.directive("click",{bind:function(e,t,r){var n=r.$parseDirectiveGetterParameters(t);e.onclick=function(t){var i=r.$getContext(e),o=n(i,t);"function"==typeof o&&o.call(i.$this,i,t)}}}),l.directive("on",{bind:function(e,t,r){var n=r.$parseDirectiveGetterParameters(t),i=n(r.$getContext(e));"object"===("undefined"==typeof i?"undefined":_typeof(i))&&Object.keys(i).forEach(function(t){var n=i[t],o="on"+t;e[o]=function(t){n(r.$getContext(e),t)}})}}),l.directive("submit",{bind:function(e,t,r){if("form"!==e.nodeName.toLowerCase())throw new o("submit directive can be applied only on form tags");var n=r.$parseDirectiveGetterParameters(t);e.addEventListener("submit",function(t){var i=n(r.$getContext(e));"function"==typeof i&&i(r.$getContext(e),t)})}}),l.directive("each",{init:function(e,t,r){i(e,r),e.$clones=[];var n=document.createElement("meta");n.$initialElement=e,n.$uid=e.$uid,n.$context=e.$context,n.setAttribute("name","e-each-"+e.$uid),r.$setElementDirective(n,"each",t),e.parentNode.replaceChild(n,e)},update:function(e,t,r){var n=e.$initialElement,i=r.$getDirectiveValue(t,n);if(i){var o=i&&Array.from("$data"in i?i.$data||[]:i)||[];o=o.filter(function(e){return void 0!==e&&null!==e}),i.$filter&&(o=o.filter(i.$filter)),i.$sort&&("function"==typeof i.$sort?o.sort(i.$sort):o.sort(function(e,t){return e[i.$sort]<t[i.$sort]?-1:1})),i.$order&&i.$order<0&&o.reverse();var a=i.$offset||0,c=a+(i.$limit||o.length);o=o.slice(a,c);var s=n.$clones.slice();s.forEach(function(e){o.indexOf(e.$$item)!==-1&&e.$context||(r.$clean(e),e.parentNode&&e.parentNode.contains(e)&&e.parentNode.removeChild(e))}),n.$clones=[],o.forEach(function(t,o){var a=s.findIndex(function(e){return e.$$item===t}),c=n.$clones.slice().reverse().concat(e).concat(n.$before);if(a!==-1){var u=s[a];if(n.$clones.push(u),a===o)return;return u.$before=c,u.$context.$index=o,void r.$insertRemoveElement(u,!0,n,!0)}var l={$index:o};i.$item&&(l[i.$item]=t);var f=n.cloneNode(!0);f.$$item=t,f.$parent=n.$parent,r.$createContext(f,t,l),f.$before=c,Object.keys(n.$directives).forEach(function(e){if("each"!==e){var t=n.$directives[e];r.$setElementDirective(f,e,r.$directives[t].parameters)}}),r.$insertRemoveElement(f,!0,n),f.innerHTML=r.$templates[n.$templateName],f.childNodes&&Array.from(f.childNodes).forEach(function(e){r.$parse(e)}),r.$render(f,["each"]),n.$clones.push(f)})}}}),l.directive("if",{init:function(e,t,r){i(e,r)},update:function(e,t,r){var n=Boolean(r.$getDirectiveValue(t,e));r.$insertRemoveElement(e,n),n&&r.$render(e,["if"])}}),l.directive("unless",{init:function(e,t,r){i(e,r)},update:function(e,t,r){var n=r.$getDirectiveValue(t,e);r.$insertRemoveElement(e,!n),n||r.$render(e,["unless"])}}),l.directive("with",{init:function(e,t,r){i(e,r)},update:function(e,t,r){var n=void 0,i={};if(e===r.$rootElement)n=r.$getDirectiveValue(t,e,r);else{if(!e.$parent)return void r.$stopRenderingPropagation(e);r.$removeContext(e),n=r.$getDirectiveValue(t,e.$parent)}n&&"$data"in n&&("$as"in n&&(i[n.$as]=n.$data),n=n.$data),n?(r.$removeContext(e),r.$createContext(e,n,i),r.$insertRemoveElement(e,!0),e.childNodes&&Array.from(e.childNodes).forEach(function(e){r.$clean(e)}),e.innerHTML=r.$templates[e.$templateName],e.childNodes&&Array.from(e.childNodes).forEach(function(e){r.$parse(e)}),r.$render(e,["with"])):r.$insertRemoveElement(e,!1)}}),l.directive("template",{update:function(e,t,r){if(document.documentElement.contains(e)){var n=r.$getDirectiveValue(t,e),i=r.$templates[n]||"";e.innerHTML=i;var o=e.querySelectorAll("script");Array.from(o).forEach(function(e){if(e.innerText){var t=new Function(e.innerText);t()}else{var r=document.createElement("script");r.src=e.src,e.parentNode.replaceChild(r,e)}}),e.childNodes&&(Array.from(e.childNodes).forEach(function(e){r.$parse(e)}),Array.from(e.childNodes).forEach(function(e){r.$render(e)}))}}}),l.transformations={},l.transform("upper",function(e){return"string"==typeof e&&e.toUpperCase()||e}),l.transform("lower",function(e){return"string"==typeof e&&e.toLowerCase()||e}),l.transform("ucfirst",function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.substr(1)}),l.transform("ucwords",function(e){return"string"!=typeof e?e:e.replace(/(^|\s)(.)/g,function(e,t,r){return t+r.toUpperCase()})}),l.transform("json",function(e){return JSON.stringify(e.valueOf())}),l.transform("number",function(e,t){if("number"!=typeof e)return e;var r=e;return void 0!==t.decimals&&(r=r.toFixed(t.decimals)),t.thousandSep&&(r=r.replace(/\B(?=(?:\d{3})+(?!\d))/g,t.thousandSep)),t.decimalSep&&(r=r.replace(".",t.decimalSep)),r}),l.config={attributePrefix:"e",delimiters:["${","}"]},Object.defineProperty(l,"version",{value:"3.2.0",writable:!1}),l.utils={uid:function(){return e()}};var f=Array.isArray;return Array.isArray=function(e){return e instanceof c||f(e)},l});