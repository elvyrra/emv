<!DOCTYPE html>

<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv='cache-control' content='no-cache' />
        <meta http-equiv='expires' content='0' />
        <meta http-equiv='pragma' content='no-cache' />

        <style>
            .red {
                color : red;
            }

            .bold  {
                font-weight: bold;
            }

            .italic {
                font-style: italic;
            }
        </style>
    </head>

    <body>
        <div id="emv">
            <ul e-with="obj">
                <li e-each="{$data : items,  $item : 'item'}">
                    <span>${$this.name}</span>

                    <p e-each="{$data : $this.items, $item : 'sub'}">${$sub.surname}</p>
                </li>
            </ul>

            <button e-on="{click : click}">Click me!</button>
        </div>

        <script type="text/javascript" src="../lib/emv.js"></script>
        <script type="text/javascript">
            let emv = new EMV({
                click : function() {
                    alert('clicked');
                }
            });

            emv.$apply();

            emv.obj = {
                items :  [
                    {
                        name : 'item1',
                        items : [
                            {
                                surname : 'item11'
                            },
                            {
                                surname : 'item12'
                            }
                        ]
                    },
                    {
                        name : 'item2',
                        items : [
                            {
                                surname : 'item21'
                            }
                        ]
                    }
                ]
            };
        </script>
    </body>
</html>